(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{71:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(23),o=a.n(r),s=a(15),i=a(5),l=a(3),d=a(10),b=a(42),u=a(7),j=a(39),p=a.n(j).a.create({baseURL:"/api/"}),h={loginAction:"LOGIN_ACTION",SuccessLogin:"SUCCESS_LOGIN",FailLogin:"FAIL_LOGIN",ObtenerDatos:"OBTENER_DATOS",ObtenerDatosSuccess:"OBTENER_DATOS_SUCCESS",ObtenerDatosFailed:"OBTENER_DATOS_FAILED",MensajeDatosAction:"MENSAJE_DATOS_ACTION",MensajeDatosFailed:"MENSAJE_DATOS_SUCCESS",EliminarerroresData:"ELIMINAR_ERRORES"},O=function(e){return function(t){t({type:h.loginAction}),p({method:"POST",url:"/auth/Login",data:e}).then((function(e){var a;localStorage.setItem("idToken",e.data.token),t((a={data:e.data,logueado:!0},{type:h.SuccessLogin,payload:a}))})).catch((function(e){var a;t((a={data:e.response.data,status:e.response.status},{type:h.FailLogin,payload:a}))}))}},m=function(e){return function(t){t({type:h.loginAction}),p({method:"POST",url:"/auth/register",data:e}).then((function(e){var a;localStorage.setItem("idToken",e.data.token),t((a={data:e.data,logueado:!0},{type:h.SuccessLogin,payload:a}))})).catch((function(e){var a;t((a={data:e.response.data,status:e.response.status},{type:h.FailLogin,payload:a}))}))}},f=(a(71),a(1));var g=function(){var e=Object(u.b)(),t=Object(c.useState)(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],o=Object(u.c)((function(e){return e.AuthReducer})),s=o.payload,j=o.error,p=o.loading,h=Object(b.a)(),g=h.register,x=h.handleSubmit;return s?Object(f.jsx)(i.a,{to:"/carpetas"}):p?Object(f.jsx)("div",{className:"vh-100 row justify-content-center align-items-center",children:Object(f.jsx)("div",{class:"spinner-border",role:"status",children:Object(f.jsx)("span",{class:"sr-only",children:"Loading..."})})}):Object(f.jsxs)("div",{className:"vh-100 row justify-content-center align-items-center",children:[j&&Object(f.jsx)("div",{class:"alert alert-danger col-12 text-center text-uppercase",role:"alert",children:j.data.message}),Object(f.jsxs)("div",{className:"login col-auto text-center w-50 h-50 row",children:[Object(f.jsx)("div",{className:"col-md-12 col-sm-12 col-12 col-lg-6",children:Object(f.jsx)("img",{className:"row img-fluid pt-4",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/React.svg/1200px-React.svg.png",alt:""})}),Object(f.jsx)("div",{className:"col-md-12 col-12 col-lg-6",children:Object(f.jsxs)("form",{className:"pt-5",onSubmit:x((function(t){e(n?m(t):O(t))}),(function(e){console.log(e)})),children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:n?"Registrar":"Iniciar sesion"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",Object(l.a)(Object(l.a)({},g("email",{required:!0})),{},{type:"email",className:"form-control",id:"floatingInput",placeholder:"correo@prueba.com"}))}),Object(f.jsx)("div",{class:"my-3",children:Object(f.jsx)("input",Object(l.a)(Object(l.a)({},g("password",{required:!0})),{},{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Contrase\xf1a"}))}),Object(f.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:n?"Registrar":"Iniciar sesion"}),Object(f.jsx)("button",{className:"w-100 btn btn-lg btn-info mt-2",onClick:function(){return r(!n)},children:n?"Iniciar sesion":"Registrar"})]})})]})]})},x=function(e){return function(e){e({type:h.ObtenerDatos});var t=localStorage.getItem("idToken");p({method:"GET",url:"/folder/",headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){var a;e((a={data:t.data,modulo:"carpetas",status:t.status},{type:h.ObtenerDatosSuccess,payload:a}))})).catch((function(t){e({type:h.ObtenerDatosFailed,payload:t})}))}},y=function(e){return function(t){t({type:h.ObtenerDatos});var a=localStorage.getItem("idToken");p({method:"POST",url:"/folder/create",data:e,headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var a;t((a={data:e.data},{type:h.MensajeDatosAction,payload:a})),t(x())})).catch((function(e){t({type:h.ObtenerDatosFailed,payload:e})}))}};var v=function(e){var t=e.tipo,a=Object(i.g)();return"1"==t?Object(f.jsxs)("nav",{class:"navbar navbar-light bg-light justify-content-between",children:[Object(f.jsx)("a",{href:"#",class:"navbar-brand",children:"Prueba Tecnica"}),Object(f.jsx)("button",{className:"btn btn-success px-5","data-toggle":"modal","data-target":"#exampleModal",children:"Crear Nueva carpeta"})]}):Object(f.jsxs)("nav",{class:"navbar navbar-light bg-light justify-content-between",children:[Object(f.jsx)("a",{href:"#",class:"navbar-brand",children:"Prueba Tecnica"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"btn btn-primary px-5 mr-2",onClick:function(){return a.push("/carpetas")},children:"Ver lista de carpetas"}),Object(f.jsx)("button",{className:"btn btn-success px-5","data-toggle":"modal","data-target":"#exampleModal1",children:"Agregar Archivo"})]})]})},N=function(e){return function(t){t({type:h.ObtenerDatos});var a=localStorage.getItem("idToken");p({method:"GET",url:"/files/".concat(e.idcarpeta),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var a;t((a={data:e.data,modulo:"Archivos",status:e.status},{type:h.ObtenerDatosSuccess,payload:a}))})).catch((function(e){t({type:h.ObtenerDatosFailed,payload:e})}))}},A=function(e){var t=e.formData,a=e.id;return function(e){e({type:h.ObtenerDatos});var c=localStorage.getItem("idToken");p({method:"POST",url:"/files/upload",data:t,headers:{Authorization:"Bearer ".concat(c)}}).then((function(t){var c;e((c={data:t.data},{type:h.MensajeDatosAction,payload:c})),e(N({idcarpeta:a}))})).catch((function(t){e({type:h.ObtenerDatosFailed,payload:t})}))}};var S=function(e){var t=e.state,a=e.id,n=e.nombrecarpeta,r=e.setnombrecarpeta,o=e.crearCarpeta,s=Object(u.b)(),i=Object(c.useState)(),l=Object(d.a)(i,2),b=l[0],j=l[1],p=Object(c.useState)(!1),h=Object(d.a)(p,2),O=(h[0],h[1]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{class:"modal fade",id:"exampleModal1",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(f.jsx)("div",{class:"modal-dialog",role:"document",children:Object(f.jsxs)("div",{class:"modal-content",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),Object(f.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(f.jsx)("div",{class:"modal-body",children:Object(f.jsxs)("form",{className:"pt-5",children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Agrega el archivo"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",{type:"file",name:"file",onChange:function(e){j(e.target.files[0]),O(!0)}})})]})}),Object(f.jsxs)("div",{class:"modal-footer",children:[Object(f.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Cerrar"}),Object(f.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(){var e=new FormData;e.append("file",b),e.append("carpeta",t.nombreCarpeta),s(A({formData:e,id:a}))},children:"Guardar Archivo Archivo"})]})]})})}),Object(f.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(f.jsx)("div",{class:"modal-dialog",role:"document",children:Object(f.jsxs)("div",{class:"modal-content",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),Object(f.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(f.jsx)("div",{class:"modal-body",children:Object(f.jsxs)("form",{className:"pt-5",children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Nombre de la carpeta"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",{type:"text",className:"form-control",value:n,onChange:function(e){return r(e.target.value)},placeholder:"carpeta1"})})]})}),Object(f.jsxs)("div",{class:"modal-footer",children:[Object(f.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Cerrar"}),Object(f.jsx)("button",{type:"button",class:"btn btn-primary",onClick:o,children:"Crear Carpeta"})]})]})})})]})};var D=function(){var e=Object(i.g)(),t=Object(u.c)((function(e){return e.DatosReducer})).payload,a=Object(c.useState)(""),n=Object(d.a)(a,2),r=n[0],o=n[1],s=Object(u.b)();Object(c.useEffect)((function(){return s(x()),null}),[]);var l=function(e){return t.filter((function(t){return t[e]}))[0]};return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(v,{tipo:"1"}),Object(f.jsx)("div",{className:"row pt-5",children:l("carpetas")&&l("carpetas").carpetas.length>0?l("carpetas").carpetas.map((function(t,a){return Object(f.jsx)("div",{className:"col-md-4 col-12 pb-4",children:Object(f.jsxs)("div",{class:"card text-center",style:{width:"18rem",cursor:"pointer"},onClick:function(){return function(t,a){e.push("/carpeta/".concat(t),a)}(t._id,t)},children:[Object(f.jsx)("img",{class:"img-fluid",src:"https://i.pinimg.com/originals/97/76/75/97767530ee9760e0c3124be123f6cce4.png"}),Object(f.jsx)("h3",{children:t.nombreCarpeta})]})})})):Object(f.jsx)("h1",{children:"No hay carpetas"})}),Object(f.jsx)(S,{nombrecarpeta:r,setnombrecarpeta:o,crearCarpeta:function(){""==r?alert("no puede estar vacio"):(s(y({nombreCarpeta:r})),o(""))}})]})},C=function(e){var t=e.idcarpeta,a=e.id;return function(e){e({type:h.ObtenerDatos});var c=localStorage.getItem("idToken");p({method:"DELETE",url:"/files/delete/".concat(a),headers:{Authorization:"Bearer ".concat(c)}}).then((function(a){var c;e((c={data:a.data},{type:h.MensajeDatosAction,payload:c})),e(N({idcarpeta:t}))})).catch((function(t){e({type:h.ObtenerDatosFailed,payload:t})}))}};var w=function(){var e=Object(i.i)().id,t=(Object(i.g)(),Object(i.h)().state),a=Object(u.b)(),n=Object(u.c)((function(e){return e.DatosReducer})).payload;Object(c.useEffect)((function(){return a(N({idcarpeta:e})),null}),[]);var r=function(e){return n.filter((function(t){return t[e]}))[0]};return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(v,{tipo:"2"}),Object(f.jsx)("div",{className:"row pt-5",children:r("Archivos")&&r("Archivos").Archivos.length>0?r("Archivos").Archivos.map((function(t,c){return Object(f.jsx)("div",{className:"col-md-4 col-12 pb-4",children:Object(f.jsxs)("div",{class:"card text-center",style:{width:"18rem",cursor:"pointer"},children:[Object(f.jsxs)("a",{target:"_blank",href:t.path,children:[Object(f.jsx)("img",{class:"img-fluid",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4c1hVYca7uPnqepz2K-_TATsEteHhwCMwCA&usqp=CAU"}),Object(f.jsx)("h3",{children:t.originalname})]}),Object(f.jsx)("button",{className:"btn btn-danger btn-lg btn-block",onClick:function(){return c=t._id,void(window.confirm("Want to delete?")&&a(C({idcarpeta:e,id:c})));var c},children:"Eliminar"})]})})})):Object(f.jsx)("h1",{children:"No hay Archivos"})}),Object(f.jsx)(S,{state:t,id:e})]})},E=a(43),T=["component"],M=function(e){var t=e.component,a=Object(E.a)(e,T),c=Object(u.c)((function(e){return e.AuthReducer})).payload;return Object(f.jsx)(i.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return function(e){return 0!==e.length}(c)?Object(f.jsx)(t,Object(l.a)({},e)):Object(f.jsx)(i.a,{to:{pathname:"/",state:{mensaje:"Usuario no autorizado"}}})}}))};var L=function(){return Object(f.jsx)(s.a,{children:Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{exact:!0,path:"/login",component:g}),Object(f.jsx)(M,{exact:!0,path:"/carpetas",component:D}),Object(f.jsx)(M,{exact:!0,path:"/carpeta/:id",component:w}),Object(f.jsx)(i.a,{from:"/",to:"/login"})]})})},k=a(18),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,payload:"",error:"",logueado:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.loginAction:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case h.SuccessLogin:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,payload:t.payload.data,logueado:t.payload.logueado,error:""});case h.FailLogin:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,payload:"",error:t.payload});default:return e}},R=a(6),_=a(14),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,payload:[],error:"",mensaje:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.ObtenerDatos:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case h.ObtenerDatosSuccess:var a=e.payload.filter((function(e){return e[t.payload.modulo]}));return e.payload.map((function(a,c){return a[t.payload.modulo]&&(402===t.payload.status?e.payload.slice(a,c):a[t.payload.modulo]=t.payload.data[t.payload.modulo]),a})),e.payload.push(Object(_.a)({},t.payload.modulo,t.payload.data)),{loading:!1,payload:(a.length,Object(R.a)(e.payload)),error:""};case h.ObtenerDatosFailed:a=e.payload.filter((function(e){return e[t.payload.modulo]}));return e.payload.map((function(a,c){return a[t.payload.modulo]&&402===t.payload.status&&e.payload.slice(a,c),a})),{loading:!1,payload:Object(R.a)(e.payload),error:t.payload};case h.MensajeDatosAction:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:t.payload.data,error:""});case h.MensajeDatosFailed:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:"",error:t.payload});case h.EliminarerroresData:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:"",error:""});default:return e}},B=Object(k.combineReducers)({AuthReducer:I,DatosReducer:F}),P=a(41),z=a(40);var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(k.createStore)(B,e,Object(z.composeWithDevTools)(Object(k.applyMiddleware)(P.a)));return t};a(74),a(75);o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(u.a,{store:G(),children:Object(f.jsx)(L,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.91972008.chunk.js.map