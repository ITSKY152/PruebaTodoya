(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{71:function(e,t,a){},74:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(23),o=a.n(r),s=a(15),i=a(5),l=a(3),d=a(10),j=a(42),b=a(7),u=a(39),p=a.n(u).a.create({baseURL:"/api/"}),m={loginAction:"LOGIN_ACTION",SuccessLogin:"SUCCESS_LOGIN",FailLogin:"FAIL_LOGIN",ObtenerDatos:"OBTENER_DATOS",ObtenerDatosSuccess:"OBTENER_DATOS_SUCCESS",ObtenerDatosFailed:"OBTENER_DATOS_FAILED",MensajeDatosAction:"MENSAJE_DATOS_ACTION",MensajeDatosFailed:"MENSAJE_DATOS_SUCCESS",EliminarerroresData:"ELIMINAR_ERRORES"},h=function(e){return function(t){t({type:m.loginAction}),p({method:"POST",url:"/auth/Login",data:e}).then((function(e){var a;localStorage.setItem("idToken",e.data.token),t((a={data:e.data,logueado:!0},{type:m.SuccessLogin,payload:a}))})).catch((function(e){var a;t((a={data:e.response.data,status:e.response.status},{type:m.FailLogin,payload:a}))}))}},O=function(e){return function(t){t({type:m.loginAction}),p({method:"POST",url:"/auth/register",data:e}).then((function(e){var a;localStorage.setItem("idToken",e.data.token),t((a={data:e.data,logueado:!0},{type:m.SuccessLogin,payload:a}))})).catch((function(e){var a;t((a={data:e.response.data,status:e.response.status},{type:m.FailLogin,payload:a}))}))}},f=(a(71),a(1));var x=function(){var e=Object(b.b)(),t=Object(c.useState)(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],o=Object(b.c)((function(e){return e.AuthReducer})),s=o.payload,u=o.error,p=o.loading,m=Object(j.a)(),x=m.register,g=m.handleSubmit;return s?Object(f.jsx)(i.a,{to:"/carpetas"}):p?Object(f.jsx)("div",{className:"vh-100 row justify-content-center align-items-center",children:Object(f.jsx)("div",{class:"spinner-border",role:"status",children:Object(f.jsx)("span",{class:"sr-only",children:"Loading..."})})}):Object(f.jsxs)("div",{className:"vh-100 row justify-content-center align-items-center",children:[u&&Object(f.jsx)("div",{class:"alert alert-danger col-12 text-center text-uppercase",role:"alert",children:u.data.message}),Object(f.jsxs)("div",{className:"login col-auto text-center col-md-6 col-12 row",children:[Object(f.jsx)("div",{className:"col-md-12 col-sm-12 col-12 col-lg-6",children:Object(f.jsx)("img",{className:"row img-fluid pt-4",src:"https://multimedia-todoya-dev.s3.amazonaws.com/1/storage/site/site_logo.png",alt:""})}),Object(f.jsx)("div",{className:"col-md-12 col-12 col-lg-6",children:Object(f.jsxs)("form",{className:"pt-5",onSubmit:g((function(t){e(n?O(t):h(t))}),(function(e){console.log(e)})),children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:n?"Registrar":"Iniciar sesion"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",Object(l.a)(Object(l.a)({},x("email",{required:!0})),{},{type:"email",className:"form-control",id:"floatingInput",placeholder:"correo@prueba.com"}))}),Object(f.jsx)("div",{class:"my-3",children:Object(f.jsx)("input",Object(l.a)(Object(l.a)({},x("password",{required:!0})),{},{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Contrase\xf1a"}))}),Object(f.jsx)("button",{className:"w-100 btn btn-lg btn-primary mb-2",type:"submit",children:n?"Registrar":"Iniciar sesion"}),Object(f.jsx)("p",{children:"Si no tienes cuenta registrate"}),Object(f.jsx)("button",{className:"w-100 btn btn-lg btn-info",onClick:function(){return r(!n)},children:n?"Iniciar sesion":"Registrar"})]})})]})]})},g=function(e){return function(e){e({type:m.ObtenerDatos});var t=localStorage.getItem("idToken");p({method:"GET",url:"/folder/",headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){var a;e((a={data:t.data,modulo:"carpetas",status:t.status},{type:m.ObtenerDatosSuccess,payload:a}))})).catch((function(t){e({type:m.ObtenerDatosFailed,payload:t})}))}},y=function(e){return function(t){t({type:m.ObtenerDatos});var a=localStorage.getItem("idToken");p({method:"POST",url:"/folder/create",data:e,headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var a;t((a={data:e.data},{type:m.MensajeDatosAction,payload:a})),t(g())})).catch((function(e){t({type:m.ObtenerDatosFailed,payload:e})}))}};var v=function(e){return e.tipo,Object(i.g)(),Object(f.jsx)("nav",{class:"navbar navbar-light bg-light justify-content-between",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("a",{class:"navbar-brand",href:"#",children:Object(f.jsx)("img",{src:"https://multimedia-todoya-dev.s3.amazonaws.com/1/storage/site/site_logo.png",alt:"",height:"50",class:"d-inline-block align-text-top"})}),Object(f.jsx)("a",{onClick:function(){localStorage.removeItem("idToken"),window.location.reload()},children:"Cerrar Sesion"})]})})},N=function(e){return function(t){t({type:m.ObtenerDatos});var a=localStorage.getItem("idToken");p({method:"GET",url:"/files/".concat(e.idcarpeta),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var a;t((a={data:e.data,modulo:"Archivos",status:e.status},{type:m.ObtenerDatosSuccess,payload:a}))})).catch((function(e){t({type:m.ObtenerDatosFailed,payload:e})}))}},S=function(e){var t=e.formData,a=e.id;return function(e){e({type:m.ObtenerDatos});var c=localStorage.getItem("idToken");p({method:"POST",url:"/files/upload",data:t,headers:{Authorization:"Bearer ".concat(c)}}).then((function(t){var c;e((c={data:t.data},{type:m.MensajeDatosAction,payload:c})),e(N({idcarpeta:a}))})).catch((function(t){e({type:m.ObtenerDatosFailed,payload:t})}))}};var A=function(e){var t=e.state,a=e.id,n=e.nombrecarpeta,r=e.setnombrecarpeta,o=e.crearCarpeta,s=Object(b.b)(),i=Object(c.useState)(),l=Object(d.a)(i,2),j=l[0],u=l[1],p=Object(c.useState)(!1),m=Object(d.a)(p,2),h=(m[0],m[1]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{class:"modal fade",id:"exampleModal1",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(f.jsx)("div",{class:"modal-dialog",role:"document",children:Object(f.jsxs)("div",{class:"modal-content",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),Object(f.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(f.jsx)("div",{class:"modal-body",children:Object(f.jsxs)("form",{className:"pt-5",children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Agrega el archivo"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",{type:"file",name:"file",onChange:function(e){u(e.target.files[0]),h(!0)}})})]})}),Object(f.jsxs)("div",{class:"modal-footer",children:[Object(f.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Cerrar"}),Object(f.jsx)("button",{type:"button",class:"btn btn-primary",onClick:function(){var e=new FormData;e.append("file",j),e.append("carpeta",t.nombreCarpeta),s(S({formData:e,id:a}))},children:"Guardar Archivo Archivo"})]})]})})}),Object(f.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(f.jsx)("div",{class:"modal-dialog",role:"document",children:Object(f.jsxs)("div",{class:"modal-content",children:[Object(f.jsxs)("div",{class:"modal-header",children:[Object(f.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),Object(f.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(f.jsx)("div",{class:"modal-body",children:Object(f.jsxs)("form",{className:"pt-5",children:[Object(f.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Nombre de la carpeta"}),Object(f.jsx)("div",{className:"my-3",children:Object(f.jsx)("input",{type:"text",className:"form-control",value:n,onChange:function(e){return r(e.target.value)},placeholder:"carpeta1"})})]})}),Object(f.jsxs)("div",{class:"modal-footer",children:[Object(f.jsx)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",children:"Cerrar"}),Object(f.jsx)("button",{type:"button",class:"btn btn-primary",onClick:o,children:"Crear Carpeta"})]})]})})})]})};var D=function(){return Object(f.jsx)("footer",{class:"footer mt-auto py-3 bg-light",children:Object(f.jsxs)("div",{class:"container d-flex justify-content-between",children:[Object(f.jsx)("span",{class:"text-muted",children:"Aplicacion para manejo de archivos de TODOYA"}),Object(f.jsx)("p",{children:"Realizado por Ivan Caviedes"})]})})};var C=function(){var e=Object(i.g)(),t=Object(b.c)((function(e){return e.DatosReducer})).payload,a=Object(c.useState)(""),n=Object(d.a)(a,2),r=n[0],o=n[1],s=Object(b.b)();Object(c.useEffect)((function(){return s(g()),null}),[]);var l=function(e){return t.filter((function(t){return t[e]}))[0]};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{tipo:"1"}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"row pt-5",children:[Object(f.jsx)("div",{className:"d-flex justify-content-end col-12",children:Object(f.jsx)("button",{className:"btn btn-success px-5","data-toggle":"modal","data-target":"#exampleModal",children:"Crear Nueva carpeta"})}),l("carpetas")&&l("carpetas").carpetas.length>0&&Object(f.jsx)("div",{className:"col-12 d-flex justify-content-center py-5",children:Object(f.jsx)("h1",{children:"Revisa Tus carpetas creadas o crea una nueva"})}),l("carpetas")&&l("carpetas").carpetas.length>0?l("carpetas").carpetas.map((function(t,a){return Object(f.jsx)("div",{className:"col-md-4 col-12 pb-4",children:Object(f.jsxs)("div",{class:"card text-center",style:{width:"18rem",cursor:"pointer"},onClick:function(){return function(t,a){e.push("/carpeta/".concat(t),a)}(t._id,t)},children:[Object(f.jsx)("img",{class:"img-fluid",src:"https://i.pinimg.com/originals/97/76/75/97767530ee9760e0c3124be123f6cce4.png"}),Object(f.jsx)("h3",{children:t.nombreCarpeta})]})})})):Object(f.jsx)("div",{className:"pt-5",children:Object(f.jsx)("h1",{children:"En el momento no hay carpetas crea una!"})})]}),Object(f.jsx)(A,{nombrecarpeta:r,setnombrecarpeta:o,crearCarpeta:function(){""==r?alert("no puede estar vacio"):(s(y({nombreCarpeta:r})),o(""))}})]}),Object(f.jsx)(D,{})]})},w=function(e){var t=e.idcarpeta,a=e.id;return function(e){e({type:m.ObtenerDatos});var c=localStorage.getItem("idToken");p({method:"DELETE",url:"/files/delete/".concat(a),headers:{Authorization:"Bearer ".concat(c)}}).then((function(a){var c;e((c={data:a.data},{type:m.MensajeDatosAction,payload:c})),e(N({idcarpeta:t}))})).catch((function(t){e({type:m.ObtenerDatosFailed,payload:t})}))}};var E=function(){var e=Object(i.i)().id,t=Object(i.g)(),a=Object(i.h)().state,n=Object(b.b)(),r=Object(b.c)((function(e){return e.DatosReducer})).payload;Object(c.useEffect)((function(){return n(N({idcarpeta:e})),null}),[]);var o=function(e){return r.filter((function(t){return t[e]}))[0]};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{tipo:"2"}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"row pt-5",children:[Object(f.jsxs)("div",{className:"d-flex justify-content-end col-12",children:[Object(f.jsx)("button",{className:"btn btn-primary px-5 mr-2",onClick:function(){return t.push("/carpetas")},children:"Ver lista de carpetas"}),Object(f.jsx)("button",{className:"btn btn-success px-5","data-toggle":"modal","data-target":"#exampleModal1",children:"Agregar Archivo"})]}),o("Archivos")&&o("Archivos").Archivos.length>0?o("Archivos").Archivos.map((function(t,a){return Object(f.jsx)("div",{className:"col-md-4 col-12 pb-4",children:Object(f.jsxs)("div",{class:"card text-center",style:{width:"18rem",cursor:"pointer"},children:[Object(f.jsxs)("a",{target:"_blank",href:t.path,children:[Object(f.jsx)("img",{class:"img-fluid",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4c1hVYca7uPnqepz2K-_TATsEteHhwCMwCA&usqp=CAU"}),Object(f.jsx)("h3",{children:t.originalname})]}),Object(f.jsx)("button",{className:"btn btn-danger btn-lg btn-block",onClick:function(){return a=t._id,void(window.confirm("Want to delete?")&&n(w({idcarpeta:e,id:a})));var a},children:"Eliminar"})]})})})):Object(f.jsx)("div",{className:"pt-5",children:Object(f.jsx)("h1",{children:"En el momento no hay archivos puedes a\xf1adir uno!"})})]}),Object(f.jsx)(A,{state:a,id:e})]}),Object(f.jsx)(D,{})]})},T=a(43),I=["component"],M=function(e){var t=e.component,a=Object(T.a)(e,I),c=Object(b.c)((function(e){return e.AuthReducer})).payload;return Object(f.jsx)(i.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return function(e){return 0!==e.length}(c)?Object(f.jsx)(t,Object(l.a)({},e)):Object(f.jsx)(i.a,{to:{pathname:"/",state:{mensaje:"Usuario no autorizado"}}})}}))};a(74);var k=function(){return Object(f.jsx)(s.a,{children:Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{exact:!0,path:"/login",component:x}),Object(f.jsx)(M,{exact:!0,path:"/carpetas",component:C}),Object(f.jsx)(M,{exact:!0,path:"/carpeta/:id",component:E}),Object(f.jsx)(i.a,{from:"/",to:"/login"})]})})},L=a(18),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,payload:"",error:"",logueado:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.loginAction:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case m.SuccessLogin:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,payload:t.payload.data,logueado:t.payload.logueado,error:""});case m.FailLogin:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,payload:"",error:t.payload});default:return e}},_=a(6),F=a(14),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,payload:[],error:"",mensaje:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.ObtenerDatos:return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case m.ObtenerDatosSuccess:var a=e.payload.filter((function(e){return e[t.payload.modulo]}));return e.payload.map((function(a,c){return a[t.payload.modulo]&&(402===t.payload.status?e.payload.slice(a,c):a[t.payload.modulo]=t.payload.data[t.payload.modulo]),a})),e.payload.push(Object(F.a)({},t.payload.modulo,t.payload.data)),{loading:!1,payload:(a.length,Object(_.a)(e.payload)),error:""};case m.ObtenerDatosFailed:a=e.payload.filter((function(e){return e[t.payload.modulo]}));return e.payload.map((function(a,c){return a[t.payload.modulo]&&402===t.payload.status&&e.payload.slice(a,c),a})),{loading:!1,payload:Object(_.a)(e.payload),error:t.payload};case m.MensajeDatosAction:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:t.payload.data,error:""});case m.MensajeDatosFailed:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:"",error:t.payload});case m.EliminarerroresData:return Object(l.a)(Object(l.a)({},e),{},{loading:!1,mensaje:"",error:""});default:return e}},B=Object(L.combineReducers)({AuthReducer:R,DatosReducer:z}),G=a(41),P=a(40);var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(L.createStore)(B,e,Object(P.composeWithDevTools)(Object(L.applyMiddleware)(G.a)));return t};a(75),a(76);o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(b.a,{store:U(),children:Object(f.jsx)(k,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.425ac20f.chunk.js.map